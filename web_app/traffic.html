<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kottravel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Removed unnecessary Feather icons CSS -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- NOTE: Replace 'YOUR_API_KEY' with a valid Google Maps Static API key for map backgrounds. Do not expose real API keys in public code. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* .map-container {
            background-image: url('https://maps.googleapis.com/maps/api/staticmap?center=Kottakkal,Kerala&zoom=13&size=800x400&maptype=roadmap&key=YOUR_API_KEY');
            background-size: cover;
            background-position: center;
        } */
        .hero-bg {
            background-image: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)), 
                              url('https://maps.googleapis.com/maps/api/staticmap?center=Kottakkal,Kerala&zoom=14&size=1400x600&maptype=roadmap&key=YOUR_API_KEY');
            background-size: cover;
            background-position: center;
            filter: blur(2px);
        }
        .stepper-circle {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
        }
        .stepper-line {
            height: 2px;
            flex-grow: 1;
            background-color: #E2E8F0;
        }
        .stepper-active {
            background-color: #3CB371;
            color: white;
        }
        .stepper-inactive {
            background-color: #E2E8F0;
            color: #64748B;
        }
        .bottom-drawer {
            transition: transform 0.3s ease-in-out;
        }
        .bottom-drawer.closed {
            transform: translateY(calc(100% - 60px));
        }
        .issue-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0,0,0,0.1);
        }
        .issue-tile {
            transition: all 0.2s ease;
        }
        .map-marker {
            animation: bounce 1s infinite alternate;
        }
        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i data-feather="compass" class="text-green-600"></i>
                        <span class="ml-2 font-bold text-gray-900">Kottravel</span>
                    </div>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                    <a href="#" class="border-green-500 text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Home</a>
                    <a href="#live-map" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Live Map</a>
                    <a href="#report" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Report Issue</a>
                    <a href="#dashboard" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Dashboard</a>
                    <a href="#about" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">About</a>
                </div>
                <div class="-mr-2 flex items-center sm:hidden">
                    <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500">
                        <i data-feather="menu"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative">
        <div class="hero-bg absolute inset-0"></div>
        <div class="relative max-w-7xl mx-auto px-4 py-24 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl md:text-6xl">
                    <span class="block">Move Smarter in</span>
                    <span class="block text-green-600">Kottakkal</span>
                </h1>
                <p class="mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">
                    Real-time traffic monitoring and smart routing for a smoother commute.
                </p>
                <div class="mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8">
                    <div class="rounded-md shadow">
                        <a href="#live-map" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-full text-white bg-green-600 hover:bg-green-700 md:py-4 md:text-lg md:px-10">
                            Open Live Map
                        </a>
                    </div>
                    <div class="mt-3 rounded-md shadow sm:mt-0 sm:ml-3">
                        <a href="#report" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-full text-green-600 bg-white hover:bg-gray-50 md:py-4 md:text-lg md:px-10">
                            Report Issue
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center">
                <h2 class="text-base text-green-600 font-semibold tracking-wide uppercase">Features</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                    Smarter Traffic Solutions
                </p>
                <p class="mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto">
                    Our platform helps you navigate Kottakkal with real-time data and community reports.
                </p>
            </div>

            <div class="mt-10">
                <div class="space-y-10 md:space-y-0 md:grid md:grid-cols-3 md:gap-x-8 md:gap-y-10">
                    <!-- Feature 1 -->
                    <div class="relative bg-gray-50 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow">
                        <div class="absolute -top-5 left-6 bg-green-100 rounded-full p-3">
                            <i data-feather="map" class="text-green-600 w-6 h-6"></i>
                        </div>
                        <h3 class="mt-8 text-lg leading-6 font-medium text-gray-900">Live Map</h3>
                        <p class="mt-2 text-base text-gray-500">
                            View real-time traffic conditions with color-coded congestion levels across Kottakkal.
                        </p>
                    </div>

                    <!-- Feature 2 -->
                    <div class="relative bg-gray-50 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow">
                        <div class="absolute -top-5 left-6 bg-orange-100 rounded-full p-3">
                            <i data-feather="alert-circle" class="text-orange-500 w-6 h-6"></i>
                        </div>
                        <h3 class="mt-8 text-lg leading-6 font-medium text-gray-900">Report Issues</h3>
                        <p class="mt-2 text-base text-gray-500">
                            Help the community by reporting accidents, roadblocks, or hazards in just a few taps.
                        </p>
                    </div>

                    <!-- Feature 3 -->
                    <div class="relative bg-gray-50 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow">
                        <div class="absolute -top-5 left-6 bg-blue-100 rounded-full p-3">
                            <i data-feather="navigation" class="text-blue-500 w-6 h-6"></i>
                        </div>
                        <h3 class="mt-8 text-lg leading-6 font-medium text-gray-900">Smart Routes</h3>
                        <p class="mt-2 text-base text-gray-500">
                            Get optimized routes based on current traffic conditions to save time and fuel.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="bg-green-600 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center">
                <h2 class="text-base text-green-100 font-semibold tracking-wide uppercase">Community Impact</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl">
                    Making Kottakkal Roads Better
                </p>
            </div>
            <div class="mt-10 grid grid-cols-2 gap-8 md:grid-cols-4">
                <div class="text-center">
                    <p class="text-5xl font-extrabold text-white">1.2k</p>
                    <p class="mt-2 text-sm font-medium text-green-100">Road Issues Solved</p>
                </div>
                <div class="text-center">
                    <p class="text-5xl font-extrabold text-white">15%</p>
                    <p class="mt-2 text-sm font-medium text-green-100">Avg. Travel Time Reduced</p>
                </div>
                <div class="text-center">
                    <p class="text-5xl font-extrabold text-white">4.7k</p>
                    <p class="mt-2 text-sm font-medium text-green-100">Active Users</p>
                </div>
                <div class="text-center">
                    <p class="text-5xl font-extrabold text-white">87%</p>
                    <p class="mt-2 text-sm font-medium text-green-100">Report Resolution Rate</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Live Map Section -->
    <section id="live-map" class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center mb-8">
                <h2 class="text-base text-green-600 font-semibold tracking-wide uppercase">Real-time Data</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                    Live Traffic Map
                </p>
            </div>
            
            <div class="relative">
                <!-- Map Controls -->
                <div class="absolute top-4 left-4 z-10 bg-white rounded-lg shadow-md p-3">
                    <div class="flex space-x-2">
                        <button class="px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm font-medium flex items-center">
                            <span class="w-3 h-3 rounded-full bg-green-500 mr-2"></span>
                            Traffic
                        </button>
                        <button class="px-3 py-1 rounded-full bg-orange-100 text-orange-800 text-sm font-medium flex items-center">
                            <span class="w-3 h-3 rounded-full bg-orange-500 mr-2"></span>
                            Incidents
                        </button>
                        <button class="px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium flex items-center">
                            <span class="w-3 h-3 rounded-full bg-blue-500 mr-2"></span>
                            Heatmap
                        </button>
                    </div>
                </div>
                
                <!-- Legend -->
                <div class="absolute top-4 right-4 z-10 bg-white rounded-lg shadow-md p-3">
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <span class="w-3 h-3 rounded-full bg-green-500 mr-2"></span>
                            <span class="text-sm text-gray-700">Free flowing</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-3 h-3 rounded-full bg-orange-500 mr-2"></span>
                            <span class="text-sm text-gray-700">Moderate</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-3 h-3 rounded-full bg-red-500 mr-2"></span>
                            <span class="text-sm text-gray-700">Congested</span>
                        </div>
                    </div>
                </div>
                
                <!-- Live Google Map Container -->
                <div id="liveMap" class="rounded-xl shadow-lg" style="height: 70vh;"></div>
                
                <!-- Bottom Drawer -->
                <div class="bottom-drawer absolute bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-lg p-4 z-10">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-bold text-lg">Top Congested Roads</h3>
                        <button class="text-gray-500" onclick="toggleDrawer()">
                            <i data-feather="chevron-down" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-2 bg-red-50 rounded-lg">
                            <div class="flex items-center">
                                <span class="w-3 h-3 rounded-full bg-red-500 mr-3"></span>
                                <span>NH 66 - Near Medical College</span>
                            </div>
                            <span class="text-sm text-gray-600">2.4 km delay</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-orange-50 rounded-lg">
                            <div class="flex items-center">
                                <span class="w-3 h-3 rounded-full bg-orange-500 mr-3"></span>
                                <span>Kottakkal Bypass Road</span>
                            </div>
                            <span class="text-sm text-gray-600">1.2 km delay</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-orange-50 rounded-lg">
                            <div class="flex items-center">
                                <span class="w-3 h-3 rounded-full bg-orange-500 mr-3"></span>
                                <span>Main Bazaar Road</span>
                            </div>
                            <span class="text-sm text-gray-600">0.8 km delay</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Report Issue Section -->
    <section id="report" class="py-12 bg-gray-50">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center mb-8">
                <h2 class="text-base text-green-600 font-semibold tracking-wide uppercase">Community Reporting</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                    Report a Road Issue
                </p>
                <p class="mt-3 max-w-2xl text-xl text-gray-500 lg:mx-auto">
                    Help improve Kottakkal's traffic by reporting issues you encounter.
                </p>
            </div>
            
            <!-- Stepper -->
            <div class="mb-8">
                <div class="flex items-center">
                    <div class="stepper-circle stepper-active">1</div>
                    <div class="stepper-line"></div>
                    <div class="stepper-circle stepper-inactive">2</div>
                    <div class="stepper-line"></div>
                    <div class="stepper-circle stepper-inactive">3</div>
                    <div class="stepper-line"></div>
                    <div class="stepper-circle stepper-inactive">4</div>
                </div>
                <div class="flex justify-between mt-2">
                    <span class="text-sm font-medium text-green-600">Choose Type</span>
                    <span class="text-sm font-medium text-gray-500">Pin Location</span>
                    <span class="text-sm font-medium text-gray-500">Upload Photo</span>
                    <span class="text-sm font-medium text-gray-500">Submit</span>
                </div>
            </div>
            
            <!-- Step 1: Choose Issue Type -->
            <div id="step-1" class="bg-white rounded-xl shadow-sm p-6 step-content">
                <h3 class="text-lg font-medium text-gray-900 mb-4">What type of issue are you reporting?</h3>
                <div class="grid grid-cols-2 gap-4">
                    <button type="button" class="issue-tile p-4 border border-gray-200 rounded-lg flex flex-col items-center issue-type-btn" data-type="Accident">
                        <div class="bg-red-100 p-3 rounded-full mb-2">
                            <i data-feather="alert-triangle" class="text-red-500 w-6 h-6"></i>
                        </div>
                        <span class="font-medium">Accident</span>
                    </button>
                    <button type="button" class="issue-tile p-4 border border-gray-200 rounded-lg flex flex-col items-center issue-type-btn" data-type="Roadblock">
                        <div class="bg-orange-100 p-3 rounded-full mb-2">
                            <i data-feather="x-octagon" class="text-orange-500 w-6 h-6"></i>
                        </div>
                        <span class="font-medium">Roadblock</span>
                    </button>
                    <button type="button" class="issue-tile p-4 border border-gray-200 rounded-lg flex flex-col items-center issue-type-btn" data-type="Pothole">
                        <div class="bg-yellow-100 p-3 rounded-full mb-2">
                            <i data-feather="alert-circle" class="text-yellow-500 w-6 h-6"></i>
                        </div>
                        <span class="font-medium">Pothole</span>
                    </button>
                    <button type="button" class="issue-tile p-4 border border-gray-200 rounded-lg flex flex-col items-center issue-type-btn" data-type="Flooding">
                        <div class="bg-blue-100 p-3 rounded-full mb-2">
                            <i data-feather="droplet" class="text-blue-500 w-6 h-6"></i>
                        </div>
                        <span class="font-medium">Flooding</span>
                    </button>
                </div>
                <div id="ambulanceNotification" class="hidden mt-4 p-4 rounded-lg bg-red-100 text-red-800 font-semibold flex items-center">
                  üöë <span class="ml-2">In case of emergency, call Ambulance: <a href="tel:108" class="underline font-bold">108</a></span>
                </div>
                <div id="trafficPoliceNotification" class="hidden mt-4 p-4 rounded-lg bg-blue-100 text-blue-800 font-semibold flex items-center">
                  üöì <span class="ml-2">For roadblocks, call Traffic Police: <a href="tel:100" class="underline font-bold">100</a></span>
                </div>
                <div id="fireRescueNotification" class="hidden mt-4 p-4 rounded-lg bg-yellow-100 text-yellow-800 font-semibold flex items-center">
                  üöí <span class="ml-2">For flooding, call Fire & Rescue: <a href="tel:101" class="underline font-bold">101</a></span>
                </div>
                <div id="municipalityNotification" class="hidden mt-4 p-4 rounded-lg bg-green-100 text-green-800 font-semibold flex items-center">
                  üèõÔ∏è <span class="ml-2">For potholes, call Municipality: <a href="tel:0493-3271000" class="underline font-bold">0493-3271000</a></span>
                </div>
                <div class="mt-6 flex justify-end">
                    <button type="button" id="issueTypeNextBtn" class="px-6 py-2 border border-transparent text-base font-medium rounded-full text-white bg-green-600 hover:bg-green-700 step-next opacity-50 cursor-not-allowed" disabled>
                        Next: Pin Location
                    </button>
                </div>
            </div>
            
            <!-- Step 2: Pin Location (Hidden by default) -->
            <div id="step-2" class="bg-white rounded-xl shadow-sm p-6 mt-6 step-content hidden">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Where is the issue located?</h3>
                <div id="reportMap" class="rounded-lg" style="height: 300px; position: relative;"></div>
                <div class="mt-4 flex justify-between">
                    <button type="button" class="px-6 py-2 border border-gray-300 text-base font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 step-back">
                        Back
                    </button>
                    <button type="button" id="pinLocationNextBtn" class="px-6 py-2 border border-transparent text-base font-medium rounded-full text-white bg-green-600 hover:bg-green-700 step-next opacity-50 cursor-not-allowed" disabled>
                        Next: Upload Photo
                    </button>
                </div>
            </div>
            <!-- Step 3: Upload Photo (Hidden by default) -->
            <div id="step-3" class="bg-white rounded-xl shadow-sm p-6 mt-6 step-content hidden">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Upload a Photo (optional)</h3>
                <input id="uploadPhotoInput" type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100" aria-label="Upload photo">
                <div class="mt-4 flex justify-between">
                    <button type="button" class="px-6 py-2 border border-gray-300 text-base font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 step-back" aria-label="Back to Pin Location">
                        Back
                    </button>
                    <button type="button" id="uploadPhotoNextBtn" class="px-6 py-2 border border-transparent text-base font-medium rounded-full text-white bg-green-600 hover:bg-green-700 step-next opacity-50 cursor-not-allowed" aria-label="Next to Submit" disabled>
                        Next: Submit
                    </button>
                </div>
            </div>
            <!-- Step 4: Submit (Hidden by default) -->
            <div id="step-4" class="bg-white rounded-xl shadow-sm p-6 mt-6 step-content hidden">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Submit Your Report</h3>
                <p class="mb-4 text-gray-500">Review your information and submit the issue to help improve Kottakkal's traffic.</p>
                <textarea id="finalReviewInput" rows="3" class="block w-full mb-4 px-4 py-2 border border-gray-300 rounded-md" placeholder="Write a short review or description..." required></textarea>
                <div class="flex justify-between">
                    <button type="button" class="px-6 py-2 border border-gray-300 text-base font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 step-back" aria-label="Back to Upload Photo">
                        Back
                    </button>
                    <button type="submit" id="finalSubmitBtn" class="px-6 py-2 border border-transparent text-base font-medium rounded-full text-white bg-green-600 hover:bg-green-700 opacity-50 cursor-not-allowed" aria-label="Submit Report" disabled>
                        Submit
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center mb-8">
                <h2 class="text-base text-green-600 font-semibold tracking-wide uppercase">Traffic Analytics</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                    Kottakkal Traffic Dashboard
                </p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Main Map -->
                <div class="lg:col-span-3 bg-gray-50 rounded-xl shadow-sm p-4">
                    <div id="dashboardMap" class="rounded-lg" style="height: 400px;"></div>
                </div>
                
                <!-- Stats Panel -->
                <div class="space-y-4">
                    <div class="bg-white rounded-xl shadow-sm p-4">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-gray-900">Avg. Speed</h3>
                            <i data-feather="clock" class="text-gray-400"></i>
                        </div>
                        <p class="mt-2 text-3xl font-bold text-gray-900">32 <span class="text-lg text-gray-500">km/h</span></p>
                        <p class="mt-1 text-sm text-green-600 flex items-center">
                            <i data-feather="trending-up" class="w-4 h-4 mr-1"></i>
                            <span>12% better than yesterday</span>
                        </p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm p-4">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-gray-900">Total Reports (24h)</h3>
                            <i data-feather="alert-circle" class="text-gray-400"></i>
                        </div>
                        <p class="mt-2 text-3xl font-bold text-gray-900">47</p>
                        <div class="mt-2">
                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                <span>Accidents</span>
                                <span>3</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-red-500 h-2 rounded-full" style="width: 15%"></div>
                            </div>
                        </div>
                        <div class="mt-2">
                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                <span>Potholes</span>
                                <span>28</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm p-4">
                        <div class="flex items-center justify-between">
                            <h3 class="font-medium text-gray-900">Critical Alerts</h3>
                            <i data-feather="bell" class="text-gray-400"></i>
                        </div>
                        <p class="mt-2 text-3xl font-bold text-red-600">5</p>
                        <p class="mt-1 text-sm text-gray-500">Require immediate attention</p>
                    </div>
                </div>
            </div>
            
            <!-- Chart -->
            <div class="mt-6 bg-white rounded-xl shadow-sm p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Hourly Congestion Trend</h3>
                <canvas id="dashboardCongestionChart" height="150"></canvas>
            </div>
        </div>
    </section>

    <!-- Admin Panel (Optional) -->
    <section class="py-12 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center mb-8">
                <h2 class="text-base text-green-600 font-semibold tracking-wide uppercase">Administration</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                    Reports Management
                </p>
            </div>
            
            <div class="bg-white shadow overflow-hidden sm:rounded-lg">
                <div class="px-4 py-5 sm:px-6 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Recent Reports</h3>
                    <div class="flex space-x-3">
                        <button class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            Filter
                        </button>
                        <button class="px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700">
                            Export
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ID
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Type
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Location
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Reported At
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Status
                                </th>
                                <th scope="col" class="relative px-6 py-3">
                                    <span class="sr-only">Actions</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                    #RPT-1042
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-5 w-5 text-red-500">
                                            <i data-feather="alert-triangle" class="w-4 h-4"></i>
                                        </div>
                                        <div class="ml-2">Accident</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    NH 66, Near Medical College
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    10:24 AM
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                        Pending
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <button class="text-green-600 hover:text-green-900">Verify on Map</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                    #RPT-1041
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-5 w-5 text-yellow-500">
                                            <i data-feather="alert-circle" class="w-4 h-4"></i>
                                        </div>
                                        <div class="ml-2">Pothole</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    Main Bazaar Road
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    9:45 AM
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                                        Verified
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <button class="text-green-600 hover:text-green-900">Verify on Map</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                    #RPT-1040
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-5 w-5 text-blue-500">
                                            <i data-feather="droplet" class="w-4 h-4"></i>
                                        </div>
                                        <div class="ml-2">Flooding</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    Kottakkal Bypass
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    Yesterday
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                        Resolved
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <button class="text-green-600 hover:text-green-900">Verify on Map</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- About/Contact Section -->
    <section id="about" class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:grid lg:grid-cols-2 lg:gap-12">
                <div>
                    <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                        About Smart Traffic Kottakkal
                    </h2>
                    <div class="mt-6 text-gray-500 space-y-6">
                        <p>
                            Smart Traffic Monitor is a community-driven initiative to improve road safety and traffic flow in Kottakkal. 
                            Our platform combines real-time data with citizen reports to create a comprehensive view of road conditions.
                        </p>
                        <p>
                            Developed in partnership with Kottakkal Municipal Corporation and local transport authorities, this system 
                            helps both commuters and city planners make informed decisions about road usage and infrastructure improvements.
                        </p>
                        <p>
                            Since our launch in 2022, we've helped reduce average commute times by 15% and improved response times 
                            to critical road incidents by 40%.
                        </p>
                    </div>
                </div>
                <div class="mt-12 lg:mt-0">
                    <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                        Contact Us
                    </h2>
                    <div class="mt-6 bg-gray-50 rounded-lg shadow-sm p-6">
                        <form>
                            <div class="grid grid-cols-1 gap-y-6">
                                <div>
                                    <label for="name" class="sr-only">Name</label>
                                    <input type="text" name="name" id="name" autocomplete="name" class="block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-green-500 focus:border-green-500 border-gray-300 rounded-md" placeholder="Your name">
                                </div>
                                <div>
                                    <label for="email" class="sr-only">Email</label>
                                    <input type="email" name="email" id="email" autocomplete="email" class="block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-green-500 focus:border-green-500 border-gray-300 rounded-md" placeholder="Your email">
                                </div>
                                <div>
                                    <label for="message" class="sr-only">Message</label>
                                    <textarea id="message" name="message" rows="4" class="block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-green-500 focus:border-green-500 border-gray-300 rounded-md" placeholder="Your message"></textarea>
                                </div>
                                <div>
                                    <button type="submit" class="inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-base font-medium rounded-full text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                        Send Message
                                    </button>
                                </div>
                            </div>
                        </form>
                        <div class="mt-6 flex space-x-6">
                            <a href="#" class="text-gray-400 hover:text-gray-500">
                                <i data-feather="facebook" class="h-6 w-6"></i>
                            </a>
                            <a href="#" class="text-gray-400 hover:text-gray-500">
                                <i data-feather="twitter" class="h-6 w-6"></i>
                            </a>
                            <a href="#" class="text-gray-400 hover:text-gray-500">
                                <i data-feather="instagram" class="h-6 w-6"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-50">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-sm font-semibold text-gray-500 tracking-wider uppercase">Navigation</h3>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">Home</a></li>
                        <li><a href="#live-map" class="text-base text-gray-600 hover:text-green-600">Live Map</a></li>
                        <li><a href="#report" class="text-base text-gray-600 hover:text-green-600">Report Issue</a></li>
                        <li><a href="#dashboard" class="text-base text-gray-600 hover:text-green-600">Dashboard</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-500 tracking-wider uppercase">Resources</h3>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">Traffic Alerts</a></li>
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">Road Safety Tips</a></li>
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">City Regulations</a></li>
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-500 tracking-wider uppercase">Legal</h3>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">Privacy Policy</a></li>
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">Terms of Use</a></li>
                        <li><a href="#" class="text-base text-gray-600 hover:text-green-600">Cookie Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-500 tracking-wider uppercase">Subscribe</h3>
                    <p class="mt-4 text-base text-gray-600">Get traffic alerts and updates</p>
                    <form class="mt-4 sm:flex">
                        <label for="email" class="sr-only">Email</label>
                        <input type="email" name="email" id="email" required class="w-full px-5 py-3 placeholder-gray-500 focus:ring-green-500 focus:border-green-500 sm:max-w-xs border-gray-300 rounded-md" placeholder="Your email">
                        <div class="mt-3 rounded-md shadow sm:mt-0 sm:ml-3 sm:flex-shrink-0">
                            <button type="submit" class="w-full flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                Subscribe
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-200 pt-8 flex flex-col md:flex-row justify-between">
                <p class="text-base text-gray-500">¬© 2023 Smart Traffic Monitor ‚Äì Kottakkal. All rights reserved.</p>
                <div class="mt-4 md:mt-0 flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i data-feather="facebook" class="h-6 w-6"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i data-feather="twitter" class="h-6 w-6"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i data-feather="instagram" class="h-6 w-6"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Feather Icons
        feather.replace();
        
        // Toggle bottom drawer
        function toggleDrawer() {
            const drawer = document.querySelector('.bottom-drawer');
            drawer.classList.toggle('closed');
        }
        
        // Stepper logic for report issue form
        (function() {
            const reportSection = document.getElementById('report');
            const steps = reportSection.querySelectorAll('.stepper-circle');
            const stepContents = reportSection.querySelectorAll('.step-content');
            let currentStep = 0;
            let selectedIssueType = null;

            function showStep(index) {
                stepContents.forEach((content, i) => {
                    if (i === index) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
                steps.forEach((s, i) => {
                    if (i <= index) {
                        s.classList.remove('stepper-inactive');
                        s.classList.add('stepper-active');
                    } else {
                        s.classList.remove('stepper-active');
                        s.classList.add('stepper-inactive');
                    }
                });
                currentStep = index;
                if (index === 1) {
                    console.log('Pin Location step shown, googleMapsLoaded:', window.googleMapsLoaded);
                    setTimeout(function() {
                        if (window.googleMapsLoaded && typeof google !== 'undefined') {
                            initReportMap();
                        } else {
                            console.log('Google Maps not loaded yet');
                        }
                    }, 200);
                }
            }

            // Stepper circle click is disabled to prevent navigation by clicking the numbers

            // Issue type selection logic
            const issueTypeBtns = reportSection.querySelectorAll('.issue-type-btn');
            const issueTypeNextBtn = document.getElementById('issueTypeNextBtn');
            const ambulanceNotification = document.getElementById('ambulanceNotification');
            const trafficPoliceNotification = document.getElementById('trafficPoliceNotification');
            const fireRescueNotification = document.getElementById('fireRescueNotification');
            const municipalityNotification = document.getElementById('municipalityNotification');
            issueTypeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove highlight from all
                    issueTypeBtns.forEach(b => b.classList.remove('ring-2', 'ring-green-500', 'border-green-500'));
                    // Highlight selected
                    btn.classList.add('ring-2', 'ring-green-500', 'border-green-500');
                    // Store selection
                    selectedIssueType = btn.getAttribute('data-type');
                    // Show notifications based on selection
                    if (selectedIssueType === 'Accident') {
                      ambulanceNotification.classList.remove('hidden');
                      trafficPoliceNotification.classList.add('hidden');
                      fireRescueNotification.classList.add('hidden');
                      municipalityNotification.classList.add('hidden');
                    } else if (selectedIssueType === 'Roadblock') {
                      ambulanceNotification.classList.add('hidden');
                      trafficPoliceNotification.classList.remove('hidden');
                      fireRescueNotification.classList.add('hidden');
                      municipalityNotification.classList.add('hidden');
                    } else if (selectedIssueType === 'Flooding') {
                      ambulanceNotification.classList.add('hidden');
                      trafficPoliceNotification.classList.add('hidden');
                      fireRescueNotification.classList.remove('hidden');
                      municipalityNotification.classList.add('hidden');
                    } else if (selectedIssueType === 'Pothole') {
                      ambulanceNotification.classList.add('hidden');
                      trafficPoliceNotification.classList.add('hidden');
                      fireRescueNotification.classList.add('hidden');
                      municipalityNotification.classList.remove('hidden');
                    } else {
                      ambulanceNotification.classList.add('hidden');
                      trafficPoliceNotification.classList.add('hidden');
                      fireRescueNotification.classList.add('hidden');
                      municipalityNotification.classList.add('hidden');
                    }
                    // Enable Next button
                    issueTypeNextBtn.disabled = false;
                    issueTypeNextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                });
            });
            // Prevent moving forward if not selected
            issueTypeNextBtn.addEventListener('click', function(e) {
                if (!selectedIssueType) {
                    e.preventDefault();
                    return false;
                }
            });

            // Event delegation for next/back buttons
            reportSection.addEventListener('click', function(e) {
                const nextBtn = e.target.closest('.step-next');
                const backBtn = e.target.closest('.step-back');
                if (nextBtn) {
                    // Prevent moving forward from step 0 if no type selected
                    if (currentStep === 0 && !selectedIssueType) {
                        e.preventDefault();
                        return;
                    }
                    e.preventDefault();
                    if (currentStep < stepContents.length - 1) {
                        showStep(currentStep + 1);
                    }
                }
                if (backBtn) {
                    e.preventDefault();
                    if (currentStep > 0) {
                        showStep(currentStep - 1);
                    }
                }
            });

            showStep(0);
        })();
    </script>
    <!-- Initialize dashboard congestion chart (add fallback if element is missing) -->
    <script>
        const dashboardChartCanvas = document.getElementById('dashboardCongestionChart');
        if (dashboardChartCanvas) {
            const ctx = dashboardChartCanvas.getContext('2d');
            const chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['6AM', '8AM', '10AM', '12PM', '2PM', '4PM', '6PM', '8PM'],
                    datasets: [{
                        label: 'Congestion Level',
                        data: [20, 45, 60, 40, 30, 55, 70, 35],
                        backgroundColor: 'rgba(60, 179, 113, 0.1)',
                        borderColor: '#3CB371',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
    <!-- Google Maps JavaScript API -->
    <script>
      function initMap() {
        console.log('Google Maps API loaded');
        window.googleMapsLoaded = true;
        // Initialize main and dashboard maps if present
        if (document.getElementById('liveMap')) {
          var kottakkal = { lat: 10.9942, lng: 76.0062 };
          var map = new google.maps.Map(document.getElementById('liveMap'), {
            zoom: 13,
            center: kottakkal
          });
          new google.maps.Marker({
            position: kottakkal,
            map: map,
            title: 'Kottakkal Center'
          });
        }
        if (document.getElementById('dashboardMap')) {
          var kottakkal = { lat: 10.9942, lng: 76.0062 };
          var map = new google.maps.Map(document.getElementById('dashboardMap'), {
            zoom: 13,
            center: kottakkal
          });
          new google.maps.Marker({
            position: kottakkal,
            map: map,
            title: 'Kottakkal Center'
          });
        }
      }

      function initReportMap() {
        var mapDiv = document.getElementById('reportMap');
        console.log('initReportMap called, mapDiv:', mapDiv);
        if (!mapDiv) return;
        mapDiv.innerHTML = '';
        var kottakkal = { lat: 10.9942, lng: 76.0062 };
        var map = new google.maps.Map(mapDiv, {
          zoom: 13,
          center: kottakkal
        });
        var marker = new google.maps.Marker({
          position: kottakkal,
          map: map,
          draggable: true,
          title: 'Pin the issue location'
        });
        // Disable the Next button by default
        var nextBtn = document.getElementById('pinLocationNextBtn');
        if (nextBtn) {
          nextBtn.disabled = true;
          nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
        }
        // Enable Next button when marker is dragged
        marker.addListener('dragend', function() {
          if (nextBtn) {
            nextBtn.disabled = false;
            nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
          }
          // Optionally, store the new coordinates:
          // var latLng = marker.getPosition();
          // window.pinnedLocation = { lat: latLng.lat(), lng: latLng.lng() };
        });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAvRof_vnY0uVk9TDMWauTxhWLDm6oiSDs&callback=initMap" async defer></script>
</body>
</html>